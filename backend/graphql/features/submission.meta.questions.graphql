extend type Publication {
    meta_prompt_sets: [MetaPromptSet!]
        @hasMany(relation: "metaPromptSets", scope: "ordered")
    meta_prompt_set(id: ID! @whereKey): MetaPromptSet @find
}

type MetaPromptSet {
    id: ID!
    name: String!
    caption: String
    required: Boolean!
    meta_prompts: [MetaPrompt!]
        @hasMany(relation: "metaPrompts", scope: "ordered")
    order: Int!
}

type MetaPrompt {
    id: ID!
    label: String!
    caption: String
    required: Boolean!
    options: JSON
    order: Int!
    type: MetaPromptType!
}

enum MetaPromptType {
    INPUT @enum(value: 1)
    TEXTAREA @enum(value: 2)
    SELECT @enum(value: 3)
    CHECKBOX @enum(value: 4)
}

extend input UpdatePublicationInput {
    meta_prompt_sets: UpdateMetaPromptSetInput
        @rename(attribute: "metaPromptSets")
}

input UpdateMetaPromptSetInput {
    create: [CreateQuestionSetInput!]
    update: [UpdateQuestionSetInput!]
    upsert: [UpsertQuestionSetInput!]
    delete: [ID!]
    connect: [ID!]
    disconnect: [ID!]
}

input CreateQuestionSetInput {
    name: String!
}

input UpdateQuestionSetInput {
    id: ID!
    name: String
    prompts: UpdateMetaPromptInput @rename(attribute: "prompts")
}

input UpdateMetaPromptInput {
    create: [CreateMetaPromptInput!]
    update: [UpdateMetaPromptInput!]
    delete: [ID!]
}

input CreateMetaPromptInput {
    prompt: String!
    required: Boolean!
    caption: String
    order: Int
}

input UpdateMetaPromptInput {
    id: ID!
    prompt: String
    required: Boolean
    caption: String
    order: Int
}
