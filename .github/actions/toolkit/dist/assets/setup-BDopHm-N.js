import{c as ie}from"./github-unh85YzM.js";import{d as c,e as Ae,c as m,a as yt}from"./action-Bjp6SQtd.js";import{g as Se}from"./tools-mzZZRgr6.js";import it from"fs";import K from"path";import Ce from"assert";import St from"os";import{b as wt}from"./once-DTkelibJ.js";import xt from"crypto";import $t from"stream";import Ot from"util";import*as J from"fs/promises";import"http";import"https";import"net";import"tls";import"events";import"buffer";import"querystring";import"stream/web";import"node:stream";import"node:util";import"node:events";import"worker_threads";import"perf_hooks";import"util/types";import"async_hooks";import"console";import"url";import"zlib";import"string_decoder";import"diagnostics_channel";import"child_process";import"timers";var Q={},ce={},fe={},jt=c&&c.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Et=c&&c.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Mt=c&&c.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&jt(e,t,n);return Et(e,t),e};Object.defineProperty(fe,"__esModule",{value:!0});fe.getOptions=void 0;const q=Mt(Ae());function Rt(t){const e={followSymbolicLinks:!0,implicitDescendants:!0,matchDirectories:!0,omitBrokenSymbolicLinks:!0,excludeHiddenFiles:!1};return t&&(typeof t.followSymbolicLinks=="boolean"&&(e.followSymbolicLinks=t.followSymbolicLinks,q.debug(`followSymbolicLinks '${e.followSymbolicLinks}'`)),typeof t.implicitDescendants=="boolean"&&(e.implicitDescendants=t.implicitDescendants,q.debug(`implicitDescendants '${e.implicitDescendants}'`)),typeof t.matchDirectories=="boolean"&&(e.matchDirectories=t.matchDirectories,q.debug(`matchDirectories '${e.matchDirectories}'`)),typeof t.omitBrokenSymbolicLinks=="boolean"&&(e.omitBrokenSymbolicLinks=t.omitBrokenSymbolicLinks,q.debug(`omitBrokenSymbolicLinks '${e.omitBrokenSymbolicLinks}'`)),typeof t.excludeHiddenFiles=="boolean"&&(e.excludeHiddenFiles=t.excludeHiddenFiles,q.debug(`excludeHiddenFiles '${e.excludeHiddenFiles}'`))),e}fe.getOptions=Rt;var B={},x={},Dt=c&&c.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),At=c&&c.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ct=c&&c.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Dt(e,t,n);return At(e,t),e},It=c&&c.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(x,"__esModule",{value:!0});x.safeTrimTrailingSeparator=x.normalizeSeparators=x.hasRoot=x.hasAbsoluteRoot=x.ensureAbsoluteRoot=x.dirname=void 0;const le=Ct(K),H=It(Ce),L=process.platform==="win32";function Tt(t){if(t=Me(t),L&&/^\\\\[^\\]+(\\[^\\]+)?$/.test(t))return t;let e=le.dirname(t);return L&&/^\\\\[^\\]+\\[^\\]+\\$/.test(e)&&(e=Me(e)),e}x.dirname=Tt;function Bt(t,e){if((0,H.default)(t,"ensureAbsoluteRoot parameter 'root' must not be empty"),(0,H.default)(e,"ensureAbsoluteRoot parameter 'itemPath' must not be empty"),Ee(e))return e;if(L){if(e.match(/^[A-Z]:[^\\/]|^[A-Z]:$/i)){let n=process.cwd();return(0,H.default)(n.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${n}'`),e[0].toUpperCase()===n[0].toUpperCase()?e.length===2?`${e[0]}:\\${n.substr(3)}`:(n.endsWith("\\")||(n+="\\"),`${e[0]}:\\${n.substr(3)}${e.substr(2)}`):`${e[0]}:\\${e.substr(2)}`}else if(ee(e).match(/^\\$|^\\[^\\]/)){const n=process.cwd();return(0,H.default)(n.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${n}'`),`${n[0]}:\\${e.substr(1)}`}}return(0,H.default)(Ee(t),"ensureAbsoluteRoot parameter 'root' must have an absolute root"),t.endsWith("/")||L&&t.endsWith("\\")||(t+=le.sep),t+e}x.ensureAbsoluteRoot=Bt;function Ee(t){return(0,H.default)(t,"hasAbsoluteRoot parameter 'itemPath' must not be empty"),t=ee(t),L?t.startsWith("\\\\")||/^[A-Z]:\\/i.test(t):t.startsWith("/")}x.hasAbsoluteRoot=Ee;function Lt(t){return(0,H.default)(t,"isRooted parameter 'itemPath' must not be empty"),t=ee(t),L?t.startsWith("\\")||/^[A-Z]:/i.test(t):t.startsWith("/")}x.hasRoot=Lt;function ee(t){return t=t||"",L?(t=t.replace(/\//g,"\\"),(/^\\\\+[^\\]/.test(t)?"\\":"")+t.replace(/\\\\+/g,"\\")):t.replace(/\/\/+/g,"/")}x.normalizeSeparators=ee;function Me(t){return t?(t=ee(t),!t.endsWith(le.sep)||t===le.sep||L&&/^[A-Z]:\\$/i.test(t)?t:t.substr(0,t.length-1)):""}x.safeTrimTrailingSeparator=Me;var G={};Object.defineProperty(G,"__esModule",{value:!0});G.MatchKind=void 0;var Ne;(function(t){t[t.None=0]="None",t[t.Directory=1]="Directory",t[t.File=2]="File",t[t.All=3]="All"})(Ne||(G.MatchKind=Ne={}));var Pt=c&&c.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Wt=c&&c.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ht=c&&c.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Pt(e,t,n);return Wt(e,t),e};Object.defineProperty(B,"__esModule",{value:!0});B.partialMatch=B.match=B.getSearchPaths=void 0;const Fe=Ht(x),Nt=G,Ge=process.platform==="win32";function Ft(t){t=t.filter(r=>!r.negate);const e={};for(const r of t){const i=Ge?r.searchPath.toUpperCase():r.searchPath;e[i]="candidate"}const n=[];for(const r of t){const i=Ge?r.searchPath.toUpperCase():r.searchPath;if(e[i]==="included")continue;let s=!1,a=i,l=Fe.dirname(a);for(;l!==a;){if(e[l]){s=!0;break}a=l,l=Fe.dirname(a)}s||(n.push(r.searchPath),e[i]="included")}return n}B.getSearchPaths=Ft;function Gt(t,e){let n=Nt.MatchKind.None;for(const r of t)r.negate?n&=~r.match(e):n|=r.match(e);return n}B.match=Gt;function Ut(t,e){return t.some(n=>!n.negate&&n.partialMatch(e))}B.partialMatch=Ut;var he={},kt=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=e(t[r],r);qt(i)?n.push.apply(n,i):n.push(i)}return n},qt=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},Zt=kt,st=wt,zt=Jt,at="\0SLASH"+Math.random()+"\0",ot="\0OPEN"+Math.random()+"\0",Ie="\0CLOSE"+Math.random()+"\0",lt="\0COMMA"+Math.random()+"\0",ut="\0PERIOD"+Math.random()+"\0";function we(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function Vt(t){return t.split("\\\\").join(at).split("\\{").join(ot).split("\\}").join(Ie).split("\\,").join(lt).split("\\.").join(ut)}function Xt(t){return t.split(at).join("\\").split(ot).join("{").split(Ie).join("}").split(lt).join(",").split(ut).join(".")}function ct(t){if(!t)return[""];var e=[],n=st("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,a=r.split(",");a[a.length-1]+="{"+i+"}";var l=ct(s);return s.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}function Jt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),F(Vt(t),!0).map(Xt)):[]}function Qt(t){return"{"+t+"}"}function Yt(t){return/^-?0\d/.test(t)}function Kt(t,e){return t<=e}function er(t,e){return t>=e}function F(t,e){var n=[],r=st("{","}",t);if(!r||/\$$/.test(r.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),a=i||s,l=r.body.indexOf(",")>=0;if(!a&&!l)return r.post.match(/,(?!,).*\}/)?(t=r.pre+"{"+r.body+Ie+r.post,F(t)):[t];var o;if(a)o=r.body.split(/\.\./);else if(o=ct(r.body),o.length===1&&(o=F(o[0],!1).map(Qt),o.length===1)){var f=r.post.length?F(r.post,!1):[""];return f.map(function(_e){return r.pre+o[0]+_e})}var u=r.pre,f=r.post.length?F(r.post,!1):[""],h;if(a){var p=we(o[0]),g=we(o[1]),v=Math.max(o[0].length,o[1].length),b=o.length==3?Math.abs(we(o[2])):1,O=Kt,_=g<p;_&&(b*=-1,O=er);var y=o.some(Yt);h=[];for(var M=p;O(M,g);M+=b){var w;if(s)w=String.fromCharCode(M),w==="\\"&&(w="");else if(w=String(M),y){var A=v-w.length;if(A>0){var re=new Array(A+1).join("0");M<0?w="-"+re+w.slice(1):w=re+w}}h.push(w)}}else h=Zt(o,function(ne){return F(ne,!1)});for(var N=0;N<h.length;N++)for(var P=0;P<f.length;P++){var R=u+h[N]+f[P];(!e||a||R)&&n.push(R)}return n}var tr=j;j.Minimatch=S;var Y=function(){try{return require("path")}catch{}}()||{sep:"/"};j.sep=Y.sep;var Te=j.GLOBSTAR=S.GLOBSTAR={},rr=zt,Ue={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Re="[^/]",De=Re+"*?",nr="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",ir="(?:(?!(?:\\/|^)\\.).)*?",ke=sr("().*{}+?[]^$\\!");function sr(t){return t.split("").reduce(function(e,n){return e[n]=!0,e},{})}var ft=/\/+/;j.filter=ar;function ar(t,e){return e=e||{},function(n,r,i){return j(n,t,e)}}function C(t,e){e=e||{};var n={};return Object.keys(t).forEach(function(r){n[r]=t[r]}),Object.keys(e).forEach(function(r){n[r]=e[r]}),n}j.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return j;var e=j,n=function(i,s,a){return e(i,s,C(t,a))};return n.Minimatch=function(i,s){return new e.Minimatch(i,C(t,s))},n.Minimatch.defaults=function(i){return e.defaults(C(t,i)).Minimatch},n.filter=function(i,s){return e.filter(i,C(t,s))},n.defaults=function(i){return e.defaults(C(t,i))},n.makeRe=function(i,s){return e.makeRe(i,C(t,s))},n.braceExpand=function(i,s){return e.braceExpand(i,C(t,s))},n.match=function(r,i,s){return e.match(r,i,C(t,s))},n};S.defaults=function(t){return j.defaults(t).Minimatch};function j(t,e,n){return pe(e),n||(n={}),!n.nocomment&&e.charAt(0)==="#"?!1:new S(e,n).match(t)}function S(t,e){if(!(this instanceof S))return new S(t,e);pe(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&Y.sep!=="/"&&(t=t.split(Y.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}S.prototype.debug=function(){};S.prototype.make=or;function or(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,n),n=this.globParts=n.map(function(r){return r.split(ft)}),this.debug(this.pattern,n),n=n.map(function(r,i,s){return r.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,n),this.set=n}S.prototype.parseNegate=lr;function lr(){var t=this.pattern,e=!1,n=this.options,r=0;if(!n.nonegate){for(var i=0,s=t.length;i<s&&t.charAt(i)==="!";i++)e=!e,r++;r&&(this.pattern=t.substr(r)),this.negate=e}}j.braceExpand=function(t,e){return ht(t,e)};S.prototype.braceExpand=ht;function ht(t,e){return e||(this instanceof S?e=this.options:e={}),t=typeof t>"u"?this.pattern:t,pe(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:rr(t)}var ur=1024*64,pe=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>ur)throw new TypeError("pattern is too long")};S.prototype.parse=cr;var se={};function cr(t,e){pe(t);var n=this.options;if(t==="**")if(n.noglobstar)t="*";else return Te;if(t==="")return"";var r="",i=!!n.nocase,s=!1,a=[],l=[],o,u=!1,f=-1,h=-1,p=t.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",g=this;function v(){if(o){switch(o){case"*":r+=De,i=!0;break;case"?":r+=Re,i=!0;break;default:r+="\\"+o;break}g.debug("clearStateChar %j %j",o,r),o=!1}}for(var b=0,O=t.length,_;b<O&&(_=t.charAt(b));b++){if(this.debug("%s	%s %s %j",t,b,r,_),s&&ke[_]){r+="\\"+_,s=!1;continue}switch(_){case"/":return!1;case"\\":v(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,b,r,_),u){this.debug("  in class"),_==="!"&&b===h+1&&(_="^"),r+=_;continue}g.debug("call clearStateChar %j",o),v(),o=_,n.noext&&v();continue;case"(":if(u){r+="(";continue}if(!o){r+="\\(";continue}a.push({type:o,start:b-1,reStart:r.length,open:Ue[o].open,close:Ue[o].close}),r+=o==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",o,r),o=!1;continue;case")":if(u||!a.length){r+="\\)";continue}v(),i=!0;var y=a.pop();r+=y.close,y.type==="!"&&l.push(y),y.reEnd=r.length;continue;case"|":if(u||!a.length||s){r+="\\|",s=!1;continue}v(),r+="|";continue;case"[":if(v(),u){r+="\\"+_;continue}u=!0,h=b,f=r.length,r+=_;continue;case"]":if(b===h+1||!u){r+="\\"+_,s=!1;continue}var M=t.substring(h+1,b);try{RegExp("["+M+"]")}catch{var w=this.parse(M,se);r=r.substr(0,f)+"\\["+w[0]+"\\]",i=i||w[1],u=!1;continue}i=!0,u=!1,r+=_;continue;default:v(),s?s=!1:ke[_]&&!(_==="^"&&u)&&(r+="\\"),r+=_}}for(u&&(M=t.substr(h+1),w=this.parse(M,se),r=r.substr(0,f)+"\\["+w[0],i=i||w[1]),y=a.pop();y;y=a.pop()){var A=r.slice(y.reStart+y.open.length);this.debug("setting tail",r,y),A=A.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(We,He,ye){return ye||(ye="\\"),He+He+ye+"|"}),this.debug(`tail=%j
   %s`,A,A,y,r);var re=y.type==="*"?De:y.type==="?"?Re:"\\"+y.type;i=!0,r=r.slice(0,y.reStart)+re+"\\("+A}v(),s&&(r+="\\\\");var N=!1;switch(r.charAt(0)){case"[":case".":case"(":N=!0}for(var P=l.length-1;P>-1;P--){var R=l[P],ne=r.slice(0,R.reStart),_e=r.slice(R.reStart,R.reEnd-8),Le=r.slice(R.reEnd-8,R.reEnd),k=r.slice(R.reEnd);Le+=k;var _t=ne.split("(").length-1,me=k;for(b=0;b<_t;b++)me=me.replace(/\)[+*?]?/,"");k=me;var Pe="";k===""&&e!==se&&(Pe="$");var mt=ne+_e+k+Pe+Le;r=mt}if(r!==""&&i&&(r="(?=.)"+r),N&&(r=p+r),e===se)return[r,i];if(!i)return hr(t);var vt=n.nocase?"i":"";try{var ve=new RegExp("^"+r+"$",vt)}catch{return new RegExp("$.")}return ve._glob=t,ve._src=r,ve}j.makeRe=function(t,e){return new S(t,e||{}).makeRe()};S.prototype.makeRe=fr;function fr(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?De:e.dot?nr:ir,r=e.nocase?"i":"",i=t.map(function(s){return s.map(function(a){return a===Te?n:typeof a=="string"?pr(a):a._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch{this.regexp=!1}return this.regexp}j.match=function(t,e,n){n=n||{};var r=new S(e,n);return t=t.filter(function(i){return r.match(i)}),r.options.nonull&&!t.length&&t.push(e),t};S.prototype.match=function(e,n){if(typeof n>"u"&&(n=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;var r=this.options;Y.sep!=="/"&&(e=e.split(Y.sep).join("/")),e=e.split(ft),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var s,a;for(a=e.length-1;a>=0&&(s=e[a],!s);a--);for(a=0;a<i.length;a++){var l=i[a],o=e;r.matchBase&&l.length===1&&(o=[s]);var u=this.matchOne(o,l,n);if(u)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate};S.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,s=0,a=t.length,l=e.length;i<a&&s<l;i++,s++){this.debug("matchOne loop");var o=e[s],u=t[i];if(this.debug(e,o,u),o===!1)return!1;if(o===Te){this.debug("GLOBSTAR",[e,o,u]);var f=i,h=s+1;if(h===l){for(this.debug("** at the end");i<a;i++)if(t[i]==="."||t[i]===".."||!r.dot&&t[i].charAt(0)===".")return!1;return!0}for(;f<a;){var p=t[f];if(this.debug(`
globstar while`,t,f,e,h,p),this.matchOne(t.slice(f),e.slice(h),n))return this.debug("globstar found match!",f,a,p),!0;if(p==="."||p===".."||!r.dot&&p.charAt(0)==="."){this.debug("dot detected!",t,f,e,h);break}this.debug("globstar swallow a segment, and continue"),f++}return!!(n&&(this.debug(`
>>> no match, partial?`,t,f,e,h),f===a))}var g;if(typeof o=="string"?(g=u===o,this.debug("string match",o,u,g)):(g=u.match(o),this.debug("pattern match",o,u,g)),!g)return!1}if(i===a&&s===l)return!0;if(i===a)return n;if(s===l)return i===a-1&&t[i]==="";throw new Error("wtf?")};function hr(t){return t.replace(/\\(.)/g,"$1")}function pr(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}var de={},dr=c&&c.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),gr=c&&c.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pt=c&&c.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&dr(e,t,n);return gr(e,t),e},br=c&&c.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(de,"__esModule",{value:!0});de.Path=void 0;const Z=pt(K),I=pt(x),z=br(Ce),_r=process.platform==="win32";class mr{constructor(e){if(this.segments=[],typeof e=="string")if((0,z.default)(e,"Parameter 'itemPath' must not be empty"),e=I.safeTrimTrailingSeparator(e),!I.hasRoot(e))this.segments=e.split(Z.sep);else{let n=e,r=I.dirname(n);for(;r!==n;){const i=Z.basename(n);this.segments.unshift(i),n=r,r=I.dirname(n)}this.segments.unshift(n)}else{(0,z.default)(e.length>0,"Parameter 'itemPath' must not be an empty array");for(let n=0;n<e.length;n++){let r=e[n];(0,z.default)(r,"Parameter 'itemPath' must not contain any empty segments"),r=I.normalizeSeparators(e[n]),n===0&&I.hasRoot(r)?(r=I.safeTrimTrailingSeparator(r),(0,z.default)(r===I.dirname(r),"Parameter 'itemPath' root segment contains information for multiple segments"),this.segments.push(r)):((0,z.default)(!r.includes(Z.sep),"Parameter 'itemPath' contains unexpected path separators"),this.segments.push(r))}}}toString(){let e=this.segments[0],n=e.endsWith(Z.sep)||_r&&/^[A-Z]:$/i.test(e);for(let r=1;r<this.segments.length;r++)n?n=!1:e+=Z.sep,e+=this.segments[r];return e}}de.Path=mr;var vr=c&&c.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),yr=c&&c.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Be=c&&c.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&vr(e,t,n);return yr(e,t),e},Sr=c&&c.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(he,"__esModule",{value:!0});he.Pattern=void 0;const wr=Be(St),V=Be(K),$=Be(x),W=Sr(Ce),xr=tr,xe=G,ae=de,D=process.platform==="win32";class E{constructor(e,n=!1,r,i){this.negate=!1;let s;if(typeof e=="string")s=e.trim();else{r=r||[],(0,W.default)(r.length,"Parameter 'segments' must not empty");const u=E.getLiteral(r[0]);(0,W.default)(u&&$.hasAbsoluteRoot(u),"Parameter 'segments' first element must be a root path"),s=new ae.Path(r).toString().trim(),e&&(s=`!${s}`)}for(;s.startsWith("!");)this.negate=!this.negate,s=s.substr(1).trim();s=E.fixupPattern(s,i),this.segments=new ae.Path(s).segments,this.trailingSeparator=$.normalizeSeparators(s).endsWith(V.sep),s=$.safeTrimTrailingSeparator(s);let a=!1;const l=this.segments.map(u=>E.getLiteral(u)).filter(u=>!a&&!(a=u===""));this.searchPath=new ae.Path(l).toString(),this.rootRegExp=new RegExp(E.regExpEscape(l[0]),D?"i":""),this.isImplicitPattern=n;const o={dot:!0,nobrace:!0,nocase:D,nocomment:!0,noext:!0,nonegate:!0};s=D?s.replace(/\\/g,"/"):s,this.minimatch=new xr.Minimatch(s,o)}match(e){return this.segments[this.segments.length-1]==="**"?(e=$.normalizeSeparators(e),!e.endsWith(V.sep)&&this.isImplicitPattern===!1&&(e=`${e}${V.sep}`)):e=$.safeTrimTrailingSeparator(e),this.minimatch.match(e)?this.trailingSeparator?xe.MatchKind.Directory:xe.MatchKind.All:xe.MatchKind.None}partialMatch(e){return e=$.safeTrimTrailingSeparator(e),$.dirname(e)===e?this.rootRegExp.test(e):this.minimatch.matchOne(e.split(D?/\\+/:/\/+/),this.minimatch.set[0],!0)}static globEscape(e){return(D?e:e.replace(/\\/g,"\\\\")).replace(/(\[)(?=[^/]+\])/g,"[[]").replace(/\?/g,"[?]").replace(/\*/g,"[*]")}static fixupPattern(e,n){(0,W.default)(e,"pattern cannot be empty");const r=new ae.Path(e).segments.map(i=>E.getLiteral(i));if((0,W.default)(r.every((i,s)=>(i!=="."||s===0)&&i!==".."),`Invalid pattern '${e}'. Relative pathing '.' and '..' is not allowed.`),(0,W.default)(!$.hasRoot(e)||r[0],`Invalid pattern '${e}'. Root segment must not contain globs.`),e=$.normalizeSeparators(e),e==="."||e.startsWith(`.${V.sep}`))e=E.globEscape(process.cwd())+e.substr(1);else if(e==="~"||e.startsWith(`~${V.sep}`))n=n||wr.homedir(),(0,W.default)(n,"Unable to determine HOME directory"),(0,W.default)($.hasAbsoluteRoot(n),`Expected HOME directory to be a rooted path. Actual '${n}'`),e=E.globEscape(n)+e.substr(1);else if(D&&(e.match(/^[A-Z]:$/i)||e.match(/^[A-Z]:[^\\]/i))){let i=$.ensureAbsoluteRoot("C:\\dummy-root",e.substr(0,2));e.length>2&&!i.endsWith("\\")&&(i+="\\"),e=E.globEscape(i)+e.substr(2)}else if(D&&(e==="\\"||e.match(/^\\[^\\]/))){let i=$.ensureAbsoluteRoot("C:\\dummy-root","\\");i.endsWith("\\")||(i+="\\"),e=E.globEscape(i)+e.substr(1)}else e=$.ensureAbsoluteRoot(E.globEscape(process.cwd()),e);return $.normalizeSeparators(e)}static getLiteral(e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(i==="\\"&&!D&&r+1<e.length){n+=e[++r];continue}else{if(i==="*"||i==="?")return"";if(i==="["&&r+1<e.length){let s="",a=-1;for(let l=r+1;l<e.length;l++){const o=e[l];if(o==="\\"&&!D&&l+1<e.length){s+=e[++l];continue}else if(o==="]"){a=l;break}else s+=o}if(a>=0){if(s.length>1)return"";if(s){n+=s,r=a;continue}}}}n+=i}return n}static regExpEscape(e){return e.replace(/[[\\^$.|?*+()]/g,"\\$&")}}he.Pattern=E;var ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.SearchState=void 0;class $r{constructor(e,n){this.path=e,this.level=n}}ge.SearchState=$r;var Or=c&&c.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),jr=c&&c.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),te=c&&c.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Or(e,t,n);return jr(e,t),e},$e=c&&c.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(f){try{u(r.next(f))}catch(h){a(h)}}function o(f){try{u(r.throw(f))}catch(h){a(h)}}function u(f){f.done?s(f.value):i(f.value).then(l,o)}u((r=r.apply(t,e||[])).next())})},Er=c&&c.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(a){return new Promise(function(l,o){a=t[s](a),i(l,o,a.done,a.value)})}}function i(s,a,l,o){Promise.resolve(o).then(function(u){s({value:u,done:l})},a)}},T=c&&c.__await||function(t){return this instanceof T?(this.v=t,this):new T(t)},Mr=c&&c.__asyncGenerator||function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(p){r[p]&&(i[p]=function(g){return new Promise(function(v,b){s.push([p,g,v,b])>1||l(p,g)})})}function l(p,g){try{o(r[p](g))}catch(v){h(s[0][3],v)}}function o(p){p.value instanceof T?Promise.resolve(p.value.v).then(u,f):h(s[0][2],p)}function u(p){l("next",p)}function f(p){l("throw",p)}function h(p,g){p(g),s.shift(),s.length&&l(s[0][0],s[0][1])}};Object.defineProperty(ce,"__esModule",{value:!0});ce.DefaultGlobber=void 0;const Oe=te(Ae()),X=te(it),qe=te(fe),Ze=te(K),oe=te(B),ze=G,Ve=he,Xe=ge,Rr=process.platform==="win32";class ue{constructor(e){this.patterns=[],this.searchPaths=[],this.options=qe.getOptions(e)}getSearchPaths(){return this.searchPaths.slice()}glob(){var e,n,r,i;return $e(this,void 0,void 0,function*(){const s=[];try{for(var a=!0,l=Er(this.globGenerator()),o;o=yield l.next(),e=o.done,!e;a=!0){i=o.value,a=!1;const u=i;s.push(u)}}catch(u){n={error:u}}finally{try{!a&&!e&&(r=l.return)&&(yield r.call(l))}finally{if(n)throw n.error}}return s})}globGenerator(){return Mr(this,arguments,function*(){const n=qe.getOptions(this.options),r=[];for(const a of this.patterns)r.push(a),n.implicitDescendants&&(a.trailingSeparator||a.segments[a.segments.length-1]!=="**")&&r.push(new Ve.Pattern(a.negate,!0,a.segments.concat("**")));const i=[];for(const a of oe.getSearchPaths(r)){Oe.debug(`Search path '${a}'`);try{yield T(X.promises.lstat(a))}catch(l){if(l.code==="ENOENT")continue;throw l}i.unshift(new Xe.SearchState(a,1))}const s=[];for(;i.length;){const a=i.pop(),l=oe.match(r,a.path),o=!!l||oe.partialMatch(r,a.path);if(!l&&!o)continue;const u=yield T(ue.stat(a,n,s));if(u&&!(n.excludeHiddenFiles&&Ze.basename(a.path).match(/^\./)))if(u.isDirectory()){if(l&ze.MatchKind.Directory&&n.matchDirectories)yield yield T(a.path);else if(!o)continue;const f=a.level+1,h=(yield T(X.promises.readdir(a.path))).map(p=>new Xe.SearchState(Ze.join(a.path,p),f));i.push(...h.reverse())}else l&ze.MatchKind.File&&(yield yield T(a.path))}})}static create(e,n){return $e(this,void 0,void 0,function*(){const r=new ue(n);Rr&&(e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`));const i=e.split(`
`).map(s=>s.trim());for(const s of i)!s||s.startsWith("#")||r.patterns.push(new Ve.Pattern(s));return r.searchPaths.push(...oe.getSearchPaths(r.patterns)),r})}static stat(e,n,r){return $e(this,void 0,void 0,function*(){let i;if(n.followSymbolicLinks)try{i=yield X.promises.stat(e.path)}catch(s){if(s.code==="ENOENT"){if(n.omitBrokenSymbolicLinks){Oe.debug(`Broken symlink '${e.path}'`);return}throw new Error(`No information found for the path '${e.path}'. This may indicate a broken symbolic link.`)}throw s}else i=yield X.promises.lstat(e.path);if(i.isDirectory()&&n.followSymbolicLinks){const s=yield X.promises.realpath(e.path);for(;r.length>=e.level;)r.pop();if(r.some(a=>a===s)){Oe.debug(`Symlink cycle detected for path '${e.path}' and realpath '${s}'`);return}r.push(s)}return i})}}ce.DefaultGlobber=ue;var be={},Dr={},Ar=c&&c.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Cr=c&&c.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),U=c&&c.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Ar(e,t,n);return Cr(e,t),e},Ir=c&&c.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(f){try{u(r.next(f))}catch(h){a(h)}}function o(f){try{u(r.throw(f))}catch(h){a(h)}}function u(f){f.done?s(f.value):i(f.value).then(l,o)}u((r=r.apply(t,e||[])).next())})},Tr=c&&c.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(a){return new Promise(function(l,o){a=t[s](a),i(l,o,a.done,a.value)})}}function i(s,a,l,o){Promise.resolve(o).then(function(u){s({value:u,done:l})},a)}};Object.defineProperty(be,"__esModule",{value:!0});be.hashFiles=void 0;const Je=U(xt),Qe=U(Ae()),Ye=U(it),Br=U($t),Lr=U(Ot),Pr=U(K);function Wr(t,e,n=!1){var r,i,s,a,l;return Ir(this,void 0,void 0,function*(){const o=n?Qe.info:Qe.debug;let u=!1;const f=e||((l=Dr.GITHUB_WORKSPACE)!==null&&l!==void 0?l:process.cwd()),h=Je.createHash("sha256");let p=0;try{for(var g=!0,v=Tr(t.globGenerator()),b;b=yield v.next(),r=b.done,!r;g=!0){a=b.value,g=!1;const O=a;if(o(O),!O.startsWith(`${f}${Pr.sep}`)){o(`Ignore '${O}' since it is not under GITHUB_WORKSPACE.`);continue}if(Ye.statSync(O).isDirectory()){o(`Skip directory '${O}'.`);continue}const _=Je.createHash("sha256");yield Lr.promisify(Br.pipeline)(Ye.createReadStream(O),_),h.write(_.digest()),p++,u||(u=!0)}}catch(O){i={error:O}}finally{try{!g&&!r&&(s=v.return)&&(yield s.call(v))}finally{if(i)throw i.error}}return h.end(),u?(o(`Found ${p} files to hash.`),h.digest("hex")):(o("No matches found for glob"),"")})}be.hashFiles=Wr;var dt=c&&c.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(f){try{u(r.next(f))}catch(h){a(h)}}function o(f){try{u(r.throw(f))}catch(h){a(h)}}function u(f){f.done?s(f.value):i(f.value).then(l,o)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Q,"__esModule",{value:!0});Q.hashFiles=bt=Q.create=void 0;const Hr=ce,Nr=be;function gt(t,e){return dt(this,void 0,void 0,function*(){return yield Hr.DefaultGlobber.create(t,e)})}var bt=Q.create=gt;function Fr(t,e="",n,r=!1){return dt(this,void 0,void 0,function*(){let i=!0;n&&typeof n.followSymbolicLinks=="boolean"&&(i=n.followSymbolicLinks);const s=yield gt(t,{followSymbolicLinks:i});return(0,Nr.hashFiles)(s,e,r)})}Q.hashFiles=Fr;var je=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},d;(function(t){t[t.EOS=0]="EOS",t[t.Text=1]="Text",t[t.Incomplete=2]="Incomplete",t[t.ESC=3]="ESC",t[t.Unknown=4]="Unknown",t[t.SGR=5]="SGR",t[t.OSCURL=6]="OSCURL"})(d||(d={}));class Gr{constructor(){this.VERSION="6.0.6",this.setup_palettes(),this._use_classes=!1,this.bold=!1,this.faint=!1,this.italic=!1,this.underline=!1,this.fg=this.bg=null,this._buffer="",this._url_allowlist={http:1,https:1},this._escape_html=!0,this.boldStyle="font-weight:bold",this.faintStyle="opacity:0.7",this.italicStyle="font-style:italic",this.underlineStyle="text-decoration:underline"}set use_classes(e){this._use_classes=e}get use_classes(){return this._use_classes}set url_allowlist(e){this._url_allowlist=e}get url_allowlist(){return this._url_allowlist}set escape_html(e){this._escape_html=e}get escape_html(){return this._escape_html}set boldStyle(e){this._boldStyle=e}get boldStyle(){return this._boldStyle}set faintStyle(e){this._faintStyle=e}get faintStyle(){return this._faintStyle}set italicStyle(e){this._italicStyle=e}get italicStyle(){return this._italicStyle}set underlineStyle(e){this._underlineStyle=e}get underlineStyle(){return this._underlineStyle}setup_palettes(){this.ansi_colors=[[{rgb:[0,0,0],class_name:"ansi-black"},{rgb:[187,0,0],class_name:"ansi-red"},{rgb:[0,187,0],class_name:"ansi-green"},{rgb:[187,187,0],class_name:"ansi-yellow"},{rgb:[0,0,187],class_name:"ansi-blue"},{rgb:[187,0,187],class_name:"ansi-magenta"},{rgb:[0,187,187],class_name:"ansi-cyan"},{rgb:[255,255,255],class_name:"ansi-white"}],[{rgb:[85,85,85],class_name:"ansi-bright-black"},{rgb:[255,85,85],class_name:"ansi-bright-red"},{rgb:[0,255,0],class_name:"ansi-bright-green"},{rgb:[255,255,85],class_name:"ansi-bright-yellow"},{rgb:[85,85,255],class_name:"ansi-bright-blue"},{rgb:[255,85,255],class_name:"ansi-bright-magenta"},{rgb:[85,255,255],class_name:"ansi-bright-cyan"},{rgb:[255,255,255],class_name:"ansi-bright-white"}]],this.palette_256=[],this.ansi_colors.forEach(r=>{r.forEach(i=>{this.palette_256.push(i)})});let e=[0,95,135,175,215,255];for(let r=0;r<6;++r)for(let i=0;i<6;++i)for(let s=0;s<6;++s){let a={rgb:[e[r],e[i],e[s]],class_name:"truecolor"};this.palette_256.push(a)}let n=8;for(let r=0;r<24;++r,n+=10){let i={rgb:[n,n,n],class_name:"truecolor"};this.palette_256.push(i)}}escape_txt_for_html(e){return this._escape_html?e.replace(/[&<>"']/gm,n=>{if(n==="&")return"&amp;";if(n==="<")return"&lt;";if(n===">")return"&gt;";if(n==='"')return"&quot;";if(n==="'")return"&#x27;"}):e}append_buffer(e){var n=this._buffer+e;this._buffer=n}get_next_packet(){var e={kind:d.EOS,text:"",url:""},n=this._buffer.length;if(n==0)return e;var r=this._buffer.indexOf("\x1B");if(r==-1)return e.kind=d.Text,e.text=this._buffer,this._buffer="",e;if(r>0)return e.kind=d.Text,e.text=this._buffer.slice(0,r),this._buffer=this._buffer.slice(r),e;if(r==0){if(n<3)return e.kind=d.Incomplete,e;var i=this._buffer.charAt(1);if(i!="["&&i!="]"&&i!="(")return e.kind=d.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e;if(i=="["){this._csi_regex||(this._csi_regex=Ke(et||(et=je([`
                        ^                           # beginning of line
                                                    #
                                                    # First attempt
                        (?:                         # legal sequence
                          \x1B[                      # CSI
                          ([<-?]?)              # private-mode char
                          ([d;]*)                    # any digits or semicolons
                          ([ -/]?               # an intermediate modifier
                          [@-~])                # the command
                        )
                        |                           # alternate (second attempt)
                        (?:                         # illegal sequence
                          \x1B[                      # CSI
                          [ -~]*                # anything legal
                          ([\0-:])              # anything illegal
                        )
                    `],[`
                        ^                           # beginning of line
                                                    #
                                                    # First attempt
                        (?:                         # legal sequence
                          \\x1b\\[                      # CSI
                          ([\\x3c-\\x3f]?)              # private-mode char
                          ([\\d;]*)                    # any digits or semicolons
                          ([\\x20-\\x2f]?               # an intermediate modifier
                          [\\x40-\\x7e])                # the command
                        )
                        |                           # alternate (second attempt)
                        (?:                         # illegal sequence
                          \\x1b\\[                      # CSI
                          [\\x20-\\x7e]*                # anything legal
                          ([\\x00-\\x1f:])              # anything illegal
                        )
                    `]))));let a=this._buffer.match(this._csi_regex);if(a===null)return e.kind=d.Incomplete,e;if(a[4])return e.kind=d.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e;a[1]!=""||a[3]!="m"?e.kind=d.Unknown:e.kind=d.SGR,e.text=a[2];var s=a[0].length;return this._buffer=this._buffer.slice(s),e}else if(i=="]"){if(n<4)return e.kind=d.Incomplete,e;if(this._buffer.charAt(2)!="8"||this._buffer.charAt(3)!=";")return e.kind=d.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e;this._osc_st||(this._osc_st=Ur(tt||(tt=je([`
                        (?:                         # legal sequence
                          (\x1B\\)                    # ESC                           |                           # alternate
                          (\x07)                      # BEL (what xterm did)
                        )
                        |                           # alternate (second attempt)
                        (                           # illegal sequence
                          [\0-]                 # anything illegal
                          |                           # alternate
                          [\b-]                 # anything illegal
                          |                           # alternate
                          [-]                 # anything illegal
                        )
                    `],[`
                        (?:                         # legal sequence
                          (\\x1b\\\\)                    # ESC \\
                          |                           # alternate
                          (\\x07)                      # BEL (what xterm did)
                        )
                        |                           # alternate (second attempt)
                        (                           # illegal sequence
                          [\\x00-\\x06]                 # anything illegal
                          |                           # alternate
                          [\\x08-\\x1a]                 # anything illegal
                          |                           # alternate
                          [\\x1c-\\x1f]                 # anything illegal
                        )
                    `])))),this._osc_st.lastIndex=0;{let o=this._osc_st.exec(this._buffer);if(o===null)return e.kind=d.Incomplete,e;if(o[3])return e.kind=d.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e}{let o=this._osc_st.exec(this._buffer);if(o===null)return e.kind=d.Incomplete,e;if(o[3])return e.kind=d.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e}this._osc_regex||(this._osc_regex=Ke(rt||(rt=je([`
                        ^                           # beginning of line
                                                    #
                        \x1B]8;                    # OSC Hyperlink
                        [ -:<-~]*       # params (excluding ;)
                        ;                           # end of params
                        ([!-~]{0,512})        # URL capture
                        (?:                         # ST
                          (?:\x1B\\)                  # ESC                           |                           # alternate
                          (?:\x07)                    # BEL (what xterm did)
                        )
                        ([ -~]+)              # TEXT capture
                        \x1B]8;;                   # OSC Hyperlink End
                        (?:                         # ST
                          (?:\x1B\\)                  # ESC                           |                           # alternate
                          (?:\x07)                    # BEL (what xterm did)
                        )
                    `],[`
                        ^                           # beginning of line
                                                    #
                        \\x1b\\]8;                    # OSC Hyperlink
                        [\\x20-\\x3a\\x3c-\\x7e]*       # params (excluding ;)
                        ;                           # end of params
                        ([\\x21-\\x7e]{0,512})        # URL capture
                        (?:                         # ST
                          (?:\\x1b\\\\)                  # ESC \\
                          |                           # alternate
                          (?:\\x07)                    # BEL (what xterm did)
                        )
                        ([\\x20-\\x7e]+)              # TEXT capture
                        \\x1b\\]8;;                   # OSC Hyperlink End
                        (?:                         # ST
                          (?:\\x1b\\\\)                  # ESC \\
                          |                           # alternate
                          (?:\\x07)                    # BEL (what xterm did)
                        )
                    `]))));let a=this._buffer.match(this._osc_regex);if(a===null)return e.kind=d.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e;e.kind=d.OSCURL,e.url=a[1],e.text=a[2];var s=a[0].length;return this._buffer=this._buffer.slice(s),e}else if(i=="(")return e.kind=d.Unknown,this._buffer=this._buffer.slice(3),e}}ansi_to_html(e){this.append_buffer(e);for(var n=[];;){var r=this.get_next_packet();if(r.kind==d.EOS||r.kind==d.Incomplete)break;r.kind==d.ESC||r.kind==d.Unknown||(r.kind==d.Text?n.push(this.transform_to_html(this.with_state(r))):r.kind==d.SGR?this.process_ansi(r):r.kind==d.OSCURL&&n.push(this.process_hyperlink(r)))}return n.join("")}with_state(e){return{bold:this.bold,faint:this.faint,italic:this.italic,underline:this.underline,fg:this.fg,bg:this.bg,text:e.text}}process_ansi(e){let n=e.text.split(";");for(;n.length>0;){let r=n.shift(),i=parseInt(r,10);if(isNaN(i)||i===0)this.fg=null,this.bg=null,this.bold=!1,this.faint=!1,this.italic=!1,this.underline=!1;else if(i===1)this.bold=!0;else if(i===2)this.faint=!0;else if(i===3)this.italic=!0;else if(i===4)this.underline=!0;else if(i===21)this.bold=!1;else if(i===22)this.faint=!1,this.bold=!1;else if(i===23)this.italic=!1;else if(i===24)this.underline=!1;else if(i===39)this.fg=null;else if(i===49)this.bg=null;else if(i>=30&&i<38)this.fg=this.ansi_colors[0][i-30];else if(i>=40&&i<48)this.bg=this.ansi_colors[0][i-40];else if(i>=90&&i<98)this.fg=this.ansi_colors[1][i-90];else if(i>=100&&i<108)this.bg=this.ansi_colors[1][i-100];else if((i===38||i===48)&&n.length>0){let s=i===38,a=n.shift();if(a==="5"&&n.length>0){let l=parseInt(n.shift(),10);l>=0&&l<=255&&(s?this.fg=this.palette_256[l]:this.bg=this.palette_256[l])}if(a==="2"&&n.length>2){let l=parseInt(n.shift(),10),o=parseInt(n.shift(),10),u=parseInt(n.shift(),10);if(l>=0&&l<=255&&o>=0&&o<=255&&u>=0&&u<=255){let f={rgb:[l,o,u],class_name:"truecolor"};s?this.fg=f:this.bg=f}}}}}transform_to_html(e){let n=e.text;if(n.length===0||(n=this.escape_txt_for_html(n),!e.bold&&!e.italic&&!e.faint&&!e.underline&&e.fg===null&&e.bg===null))return n;let r=[],i=[],s=e.fg,a=e.bg;e.bold&&r.push(this._boldStyle),e.faint&&r.push(this._faintStyle),e.italic&&r.push(this._italicStyle),e.underline&&r.push(this._underlineStyle),this._use_classes?(s&&(s.class_name!=="truecolor"?i.push(`${s.class_name}-fg`):r.push(`color:rgb(${s.rgb.join(",")})`)),a&&(a.class_name!=="truecolor"?i.push(`${a.class_name}-bg`):r.push(`background-color:rgb(${a.rgb.join(",")})`))):(s&&r.push(`color:rgb(${s.rgb.join(",")})`),a&&r.push(`background-color:rgb(${a.rgb})`));let l="",o="";return i.length&&(l=` class="${i.join(" ")}"`),r.length&&(o=` style="${r.join(";")}"`),`<span${o}${l}>${n}</span>`}process_hyperlink(e){let n=e.url.split(":");return n.length<1||!this._url_allowlist[n[0]]?"":`<a href="${this.escape_txt_for_html(e.url)}">${this.escape_txt_for_html(e.text)}</a>`}}function Ke(t,...e){let n=t.raw[0],r=/^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm,i=n.replace(r,"");return new RegExp(i)}function Ur(t,...e){let n=t.raw[0],r=/^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm,i=n.replace(r,"");return new RegExp(i,"g")}var et,tt,rt;async function kr(t){var r;const e=`${t}/*/*`;m.debug("Searching for files with pattern: "+e);const n=await bt(e);for await(const i of n.globGenerator()){m.debug("Found file: "+i);const s=await J.stat(i);if(!s.isFile())continue;if(s.size<=0){m.debug("Skipping empty file: "+i);continue}try{await J.access(i,J.constants.R_OK)}catch{m.debug("Skipping unreadable file: "+i);continue}const a=((r=/(?<service>[^\/]+)\/(?<output>[^\/]+)\.(?<ext>[^\.]+)$/.exec(i))==null?void 0:r.groups)??{service:null,output:null,ext:null};if(!a.service||!a.output||!a.ext){m.debug("Skipping file with unexpected name: "+i);continue}if(!(a.ext in nt)){m.debug("Skipping file with unsupported extension: "+i);continue}const{service:l,output:o,ext:u}=a;m.debug(`Processing file: service=${l}, output=${o}, ext=${u}`),m.summary.addDetails(o,await nt[u](i))}}const nt={txt:async function(t){const e=new Gr;e.escape_html=!1,m.debug("Converting ANSI to HTML for file: "+t);const n=await J.readFile(t);return e.ansi_to_html(n.toString())},md:async function(t){return m.debug("Processing Markdown file: "+t),(await J.readFile(t)).toString()}},On=yt({post:async function(){await kr(m.getInput("output-cache-path"))},main:async function(){const t=await Se("git",["describe","--tags","--match","v*"]),e=`${ie.repo.owner}/${ie.repo.repo}`.toLowerCase(),n=`https://github.com/${e}/commits/${ie.sha}`,r=await Se("git",["show","-s","--format=%cI",ie.sha]),i=await Se("date",["--iso=ns"]),s=`ghcr.io/${e}/cache/__service__`;m.setOutput("version",t.trim()),m.setOutput("version-url",n),m.setOutput("version-date",r.trim()),m.setOutput("repository",e),m.setOutput("docker-registry-cache",s),m.setOutput("buildstamp",i.trim());const a=await m.getInput("target");m.setOutput("image-template",a=="release"?`ghcr.io/${e}/__service__`:s)}});export{On as runCommand};
//# sourceMappingURL=setup-BDopHm-N.js.map
