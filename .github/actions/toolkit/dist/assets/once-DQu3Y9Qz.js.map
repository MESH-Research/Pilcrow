{"version":3,"file":"once-DQu3Y9Qz.js","sources":["../../node_modules/balanced-match/index.js","../../node_modules/universal-user-agent/dist-web/index.js","../../node_modules/before-after-hook/lib/register.js","../../node_modules/before-after-hook/lib/add.js","../../node_modules/before-after-hook/lib/remove.js","../../node_modules/before-after-hook/index.js","../../node_modules/deprecation/dist-web/index.js","../../node_modules/wrappy/wrappy.js","../../node_modules/once/once.js"],"sourcesContent":["'use strict';\nmodule.exports = balanced;\nfunction balanced(a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str);\n  if (b instanceof RegExp) b = maybeMatch(b, str);\n\n  var r = range(a, b, str);\n\n  return r && {\n    start: r[0],\n    end: r[1],\n    pre: str.slice(0, r[0]),\n    body: str.slice(r[0] + a.length, r[1]),\n    post: str.slice(r[1] + b.length)\n  };\n}\n\nfunction maybeMatch(reg, str) {\n  var m = str.match(reg);\n  return m ? m[0] : null;\n}\n\nbalanced.range = range;\nfunction range(a, b, str) {\n  var begs, beg, left, right, result;\n  var ai = str.indexOf(a);\n  var bi = str.indexOf(b, ai + 1);\n  var i = ai;\n\n  if (ai >= 0 && bi > 0) {\n    if(a===b) {\n      return [ai, bi];\n    }\n    begs = [];\n    left = str.length;\n\n    while (i >= 0 && !result) {\n      if (i == ai) {\n        begs.push(i);\n        ai = str.indexOf(a, i + 1);\n      } else if (begs.length == 1) {\n        result = [ begs.pop(), bi ];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi;\n        }\n\n        bi = str.indexOf(b, i + 1);\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi;\n    }\n\n    if (begs.length) {\n      result = [ left, right ];\n    }\n  }\n\n  return result;\n}\n","function getUserAgent() {\n    if (typeof navigator === \"object\" && \"userAgent\" in navigator) {\n        return navigator.userAgent;\n    }\n    if (typeof process === \"object\" && process.version !== undefined) {\n        return `Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`;\n    }\n    return \"<environment undetectable>\";\n}\n\nexport { getUserAgent };\n//# sourceMappingURL=index.js.map\n","module.exports = register;\n\nfunction register(state, name, method, options) {\n  if (typeof method !== \"function\") {\n    throw new Error(\"method for before hook must be a function\");\n  }\n\n  if (!options) {\n    options = {};\n  }\n\n  if (Array.isArray(name)) {\n    return name.reverse().reduce(function (callback, name) {\n      return register.bind(null, state, name, callback, options);\n    }, method)();\n  }\n\n  return Promise.resolve().then(function () {\n    if (!state.registry[name]) {\n      return method(options);\n    }\n\n    return state.registry[name].reduce(function (method, registered) {\n      return registered.hook.bind(null, method, options);\n    }, method)();\n  });\n}\n","module.exports = addHook;\n\nfunction addHook(state, kind, name, hook) {\n  var orig = hook;\n  if (!state.registry[name]) {\n    state.registry[name] = [];\n  }\n\n  if (kind === \"before\") {\n    hook = function (method, options) {\n      return Promise.resolve()\n        .then(orig.bind(null, options))\n        .then(method.bind(null, options));\n    };\n  }\n\n  if (kind === \"after\") {\n    hook = function (method, options) {\n      var result;\n      return Promise.resolve()\n        .then(method.bind(null, options))\n        .then(function (result_) {\n          result = result_;\n          return orig(result, options);\n        })\n        .then(function () {\n          return result;\n        });\n    };\n  }\n\n  if (kind === \"error\") {\n    hook = function (method, options) {\n      return Promise.resolve()\n        .then(method.bind(null, options))\n        .catch(function (error) {\n          return orig(error, options);\n        });\n    };\n  }\n\n  state.registry[name].push({\n    hook: hook,\n    orig: orig,\n  });\n}\n","module.exports = removeHook;\n\nfunction removeHook(state, name, method) {\n  if (!state.registry[name]) {\n    return;\n  }\n\n  var index = state.registry[name]\n    .map(function (registered) {\n      return registered.orig;\n    })\n    .indexOf(method);\n\n  if (index === -1) {\n    return;\n  }\n\n  state.registry[name].splice(index, 1);\n}\n","var register = require(\"./lib/register\");\nvar addHook = require(\"./lib/add\");\nvar removeHook = require(\"./lib/remove\");\n\n// bind with array of arguments: https://stackoverflow.com/a/21792913\nvar bind = Function.bind;\nvar bindable = bind.bind(bind);\n\nfunction bindApi(hook, state, name) {\n  var removeHookRef = bindable(removeHook, null).apply(\n    null,\n    name ? [state, name] : [state]\n  );\n  hook.api = { remove: removeHookRef };\n  hook.remove = removeHookRef;\n  [\"before\", \"error\", \"after\", \"wrap\"].forEach(function (kind) {\n    var args = name ? [state, kind, name] : [state, kind];\n    hook[kind] = hook.api[kind] = bindable(addHook, null).apply(null, args);\n  });\n}\n\nfunction HookSingular() {\n  var singularHookName = \"h\";\n  var singularHookState = {\n    registry: {},\n  };\n  var singularHook = register.bind(null, singularHookState, singularHookName);\n  bindApi(singularHook, singularHookState, singularHookName);\n  return singularHook;\n}\n\nfunction HookCollection() {\n  var state = {\n    registry: {},\n  };\n\n  var hook = register.bind(null, state);\n  bindApi(hook, state);\n\n  return hook;\n}\n\nvar collectionHookDeprecationMessageDisplayed = false;\nfunction Hook() {\n  if (!collectionHookDeprecationMessageDisplayed) {\n    console.warn(\n      '[before-after-hook]: \"Hook()\" repurposing warning, use \"Hook.Collection()\". Read more: https://git.io/upgrade-before-after-hook-to-1.4'\n    );\n    collectionHookDeprecationMessageDisplayed = true;\n  }\n  return HookCollection();\n}\n\nHook.Singular = HookSingular.bind();\nHook.Collection = HookCollection.bind();\n\nmodule.exports = Hook;\n// expose constructors as a named property for TypeScript\nmodule.exports.Hook = Hook;\nmodule.exports.Singular = Hook.Singular;\nmodule.exports.Collection = Hook.Collection;\n","class Deprecation extends Error {\n  constructor(message) {\n    super(message); // Maintains proper stack trace (only available on V8)\n\n    /* istanbul ignore next */\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n\n    this.name = 'Deprecation';\n  }\n\n}\n\nexport { Deprecation };\n","// Returns a wrapper function that returns a wrapped callback\n// The wrapper function should do some stuff, and return a\n// presumably different callback function.\n// This makes sure that own properties are retained, so that\n// decorations and such are not lost along the way.\nmodule.exports = wrappy\nfunction wrappy (fn, cb) {\n  if (fn && cb) return wrappy(fn)(cb)\n\n  if (typeof fn !== 'function')\n    throw new TypeError('need wrapper function')\n\n  Object.keys(fn).forEach(function (k) {\n    wrapper[k] = fn[k]\n  })\n\n  return wrapper\n\n  function wrapper() {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n    var ret = fn.apply(this, args)\n    var cb = args[args.length-1]\n    if (typeof ret === 'function' && ret !== cb) {\n      Object.keys(cb).forEach(function (k) {\n        ret[k] = cb[k]\n      })\n    }\n    return ret\n  }\n}\n","var wrappy = require('wrappy')\nmodule.exports = wrappy(once)\nmodule.exports.strict = wrappy(onceStrict)\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n\n  Object.defineProperty(Function.prototype, 'onceStrict', {\n    value: function () {\n      return onceStrict(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var f = function () {\n    if (f.called) return f.value\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  f.called = false\n  return f\n}\n\nfunction onceStrict (fn) {\n  var f = function () {\n    if (f.called)\n      throw new Error(f.onceError)\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  var name = fn.name || 'Function wrapped with `once`'\n  f.onceError = name + \" shouldn't be called more than once\"\n  f.called = false\n  return f\n}\n"],"names":["balancedMatch","balanced","a","b","str","maybeMatch","r","range","reg","m","begs","beg","left","right","result","ai","bi","i","getUserAgent","register_1","register","state","name","method","options","callback","registered","add","addHook","kind","hook","orig","result_","error","remove","removeHook","index","require$$0","require$$1","require$$2","bind","bindable","bindApi","removeHookRef","args","HookSingular","singularHookName","singularHookState","singularHook","HookCollection","collectionHookDeprecationMessageDisplayed","Hook","beforeAfterHookModule","Collection","Deprecation","message","wrappy_1","wrappy","fn","cb","k","wrapper","ret","onceModule","once","onceStrict","f"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8]}